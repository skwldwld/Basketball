<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Basketball Game</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }

    #player-info {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
      background-color: rgba(255, 255, 255);
      padding: 15px;
      border-radius: 10px;
      font-size: 16px;
      width: 250px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 5px;
    }

    th, td {
      /* border: 1px solid #ffffff; */
      padding: 6px;
      text-align: center;
    }

    th {
      background-color: rgba(255, 182, 182, 0.5);
    }


    #score {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 24px;
      color: white;
      z-index: 10;
    }

    .ball-selector {
      position: absolute;
      top: 60px;
      left: 20px;
      z-index: 10;
      color: white;
      background-color: rgba(0,0,0,0.5);
      padding: 10px;
      border-radius: 8px;
      font-size: 16px;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div id="player-info">
    <strong>í”Œë ˆì´ì–´ ì •ë³´</strong>
    <table>
      <thead>
        <tr>
          <th>í”Œë ˆì´ì–´</th>
          <th>ê³µ</th>
          <th>ë‚¨ì€ ê³µ</th>
          <th>ì ìˆ˜</th>
        </tr>
      </thead>
      <tbody id="player-list"></tbody>
    </table>
  </div>

  <!-- ê²Œì„ ìŠ¤í¬ë¦½íŠ¸ëŠ” ëª¨ë“ˆë¡œ ë¡œë“œ -->
  <script type="module" src="./src/js/game.js"></script>

  <!-- ì„ íƒëœ ê³µë“¤ í‘œì‹œìš© ìŠ¤í¬ë¦½íŠ¸ëŠ” ë”°ë¡œ -->
  <script>
    // let selectedBalls = [];

    const storedBalls = localStorage.getItem('selectedBalls');
    const throwCountRaw = localStorage.getItem('throwCount');

    let selectedBalls = storedBalls ? JSON.parse(storedBalls) : []; // JSON ê°’ì´ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´ í• ë‹¹
    let throwCount = throwCountRaw ? JSON.parse(throwCountRaw) : 3; // ê¸°ë³¸ê°’ 3 ì„¤ì •

    const ballIcons = {
      "ë†êµ¬ê³µ": "ğŸ€",
      "ëˆˆë©ì´": "â„ï¸",
      // "ì¢…ì´ê³µ": "",
      "í¬ì¼“ëª¬ë³¼": "",
      "ë³¼ë§ê³µ": "ğŸ³",
      "ë°©ìš¸í† ë§ˆí† ": "ğŸ…",
      // "ëŒë§¹ì´": "ğŸª¨",
    };

    const playerList = document.getElementById('player-list');
    if (selectedBalls.length > 0) {
      selectedBalls.forEach((p, i) => {
        const row = document.createElement('tr');
        
        // ë‚¨ì€ ê³µ ê°œìˆ˜ë¥¼ ê³µ ì¢…ë¥˜ì— ë§ëŠ” ì•„ì´ì½˜ìœ¼ë¡œ í‘œì‹œ
        const ballIcon = ballIcons[p.ball] || "âšª"; // ê¸°ë³¸ ê³µ ì•„ì´ì½˜
        const remainingBalls = Array(Number(throwCount)).fill(ballIcon).join(" ");

        row.innerHTML = `
          <td>í”Œë ˆì´ì–´ ${i + 1}</td>
          <td>${p.ball}</td>
          <td>${throwCount}</td>
          <td>0ì </td>
        `;
        
        playerList.appendChild(row);
      });
    } else {
      playerList.innerHTML = `<tr><td colspan="5">ì„ íƒëœ ê³µì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
    }

    // const ballOptionsDiv = document.getElementById('ball-options');
    // if (selectedBalls.length > 0) {
    //   selectedBalls.forEach((p, i) => {
    //     const line = document.createElement('div');
    //     line.textContent = `í”Œë ˆì´ì–´${i + 1}: ${p.ball}`;
    //     ballOptionsDiv.appendChild(line);
    //   });
    // } else {
    //   ballOptionsDiv.textContent = 'ì„ íƒëœ ê³µì´ ì—†ìŠµë‹ˆë‹¤.';
    // }

    // ì „ì—­ìœ¼ë¡œë„ ê³µìœ 
    window.selectedBalls = selectedBalls;
  </script>
</body>
</html>
